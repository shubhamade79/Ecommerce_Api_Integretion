<!DOCTYPE html>
<html>
<head>
    <title>Products</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<h2>Products</h2>
<div id="products"></div>

<script type="module">
import { getProducts, addToCart } from "./js/api.js";



const USER_ID = 1; // after login store in localStorage

async function loadProducts() {
    const products = await getProducts();
    const div = document.getElementById("products");

    products.forEach(p => {
        div.innerHTML += `
            <div class="card">
                <h3>${p.name}</h3>
                <p>â‚¹${p.price}</p>
                <button onclick="add(${p.id})">Add to Cart</button>
            </div>
        `;
    });
}

window.add = async (productId) => {
    await addToCart(USER_ID, productId, 1);
    alert("Added to cart");
}

loadProducts();
</script>

</body>
</html>
